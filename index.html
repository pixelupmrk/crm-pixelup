<!-- Telemetria super simples: envia pings para webhook.site -->
<script>
  (function () {
    // Client ID via ?cid=... (ex.: ?cid=LOJA-CENTRO) e versão do app
    const CID_KEY = 'px_client_id';
    const q = new URLSearchParams(location.search);
    const cidFromUrl = q.get('cid');
    if (cidFromUrl) localStorage.setItem(CID_KEY, cidFromUrl);

    window.CLIENT_ID   = localStorage.getItem(CID_KEY) || 'CLIENTE-DEMO';
    window.APP_VERSION = '1.0.0';

    // >>> COLE AQUI a sua URL única do webhook.site <<<
    window.WEBHOOK_URL = 'SUA_URL_DO_WEBHOOK_AQUI';

    // Função de telemetria (mantém a mesma assinatura pxTrack(...))
    window.pxTrack = function (eventName, props) {
      try {
        if (!window.WEBHOOK_URL || window.WEBHOOK_URL.includes(https://webhook.site/6e539c94-1dea-4997-a07c-103dfd707ebb)) return;
        const payload = {
          event: eventName,
          client: window.CLIENT_ID,
          version: window.APP_VERSION,
          ts: new Date().toISOString(),
          ...(props || {})
        };
        const body = JSON.stringify(payload);

        // Envia sem travar a UI
        if (navigator.sendBeacon) {
          const blob = new Blob([body], { type: 'application/json' });
          navigator.sendBeacon(window.WEBHOOK_URL, blob);
        } else {
          fetch(window.WEBHOOK_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body
          }).catch(() => {});
        }
      } catch (e) { /* silencioso */ }
    };
  })();
</script>
